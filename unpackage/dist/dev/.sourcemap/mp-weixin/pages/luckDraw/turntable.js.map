{"version":3,"sources":["uni-app:///main.js","webpack:///G:/代码-项目/悦朋/uniapp/O2O/悦朋微会员/celesta-wechat-member-project/pages/luckDraw/turntable.vue?840f","webpack:///G:/代码-项目/悦朋/uniapp/O2O/悦朋微会员/celesta-wechat-member-project/pages/luckDraw/turntable.vue?29ca","webpack:///G:/代码-项目/悦朋/uniapp/O2O/悦朋微会员/celesta-wechat-member-project/pages/luckDraw/turntable.vue?a841","webpack:///G:/代码-项目/悦朋/uniapp/O2O/悦朋微会员/celesta-wechat-member-project/pages/luckDraw/turntable.vue?9375","uni-app:///pages/luckDraw/turntable.vue","webpack:///G:/代码-项目/悦朋/uniapp/O2O/悦朋微会员/celesta-wechat-member-project/pages/luckDraw/turntable.vue?07ee","webpack:///G:/代码-项目/悦朋/uniapp/O2O/悦朋微会员/celesta-wechat-member-project/pages/luckDraw/turntable.vue?5a65"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","ypTurntable","data","imgUrl","isIphoneType","statusBarHeight","numberOfLuckDraw","pageIndex","total","rollTop","rollInterval","luckDraws","gridInfo","drawGridInfo","prizeaNameList","showPrizeaNameList","winPrizes","onLoad","onUnload","clearInterval","methods","getLuckDrawInfo","uni","mask","url","console","luckDraw","logo","name","text","prop","colour","init","item","tempScale","tempStart","getHeight","success","that","getNumberOfLuckDraw","getDrawRecord","pageSize","number","exclude","rollNameList","requestResult","method","header","channelsCode","terminalsCode","organizationCode","title","icon","getResult","goPrizeRecord","returnBut"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,kBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAsH;AACtH;AAC6D;AACL;AACa;;;AAGrE;AAC0K;AAC1K,gBAAgB,mLAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,oFAAM;AACR,EAAE,6FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,wFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,uMAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC1CA;AAAA;AAAA;AAAA;AAA4nB,CAAgB,ipBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;eCmFhpB;EACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;IACA;EACA;EACAC;IACA;IACA;IACA;IACA;IACA;IACA;EACA;EACAC;IACAC;EACA;EACAC;IACA;IACAC;MAAA;MACAC;QACAC;MACA;MACA;QACAC;MACA;QACAC;QACAH;QACA;QACA;QACA;QACAI;UACAd;YACAe;YACAC;YACAC;YACAC;YACAC;YACAP;UACA;QACA;QACAE;QACAA;QACA;QACA;QACA;QACA;QACA;MACA;IACA;IACAM;MAAA;MACA;MACA;MACA;QACAC;QACAA;QACAA;QACAA;QACAC;QACA;UACAC;QACA;QACAF;MACA;IACA;IACA;IACAG;MACA;MACAd;QACAe;UACA;UACA;UACA;YACA;YACA;YACAC;UACA;YACA;YACA;YACA;YACAA;UACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACAD;QACAd;MACA;QACA;QACA;QACAc;MACA;IACA;IACA;IACAE;MACA;MACAF;QACAd;QACAtB;UACAK;UACAkC;UACAC;UACAC;QACA;MACA;QACA;QACA;QACAzC;UACA+B;UACAA;QACA;QACA;UACAK;QACA;QACAA;QACAA;QACA;QACAA;MACA;IACA;IACA;IACAM;MAAA;MACA;MACA;QACA;QACA;QACA;UACA;UACAzB;UACA;UACA;QACA;QACA;QACA;UACA;QACA;MACA;IACA;IACA;IACA0B;MACA;MACA;MACAP;QACAd;QACAsB;QACAC;UACA;QACA;QACA7C;UACA8C;UACAC;UACAC;QACA;MACA;QACA;UACAZ;UACA;UACAA;UACAA;QACA;UACAhB;YACA6B;YACAC;UACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA5B;MACAA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACA;IACA6B;MACAhC;QACAE;MACA;IACA;IACA;IACA+B;MACAjC;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACxSA;AAAA;AAAA;AAAA;AAAw5B,CAAgB,k5BAAG,EAAC,C;;;;;;;;;;;ACA56B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/luckDraw/turntable.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/luckDraw/turntable.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./turntable.vue?vue&type=template&id=de58fda0&\"\nvar renderjs\nimport script from \"./turntable.vue?vue&type=script&lang=js&\"\nexport * from \"./turntable.vue?vue&type=script&lang=js&\"\nimport style0 from \"./turntable.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/luckDraw/turntable.vue\"\nexport default component.exports","export * from \"-!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./turntable.vue?vue&type=template&id=de58fda0&\"","var components\ntry {\n  components = {\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-icon/u-icon\" */ \"@/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.luckDraws.ruleDescription.length\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./turntable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./turntable.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"content\" :style=\"{ backgroundImage: 'url(' + imgUrl + '/luckDraw-bg02.png)' }\">\r\n\t\t<!-- 自定义头部 -->\r\n\t\t<view class=\"header\" :style=\"{ height: statusBarHeight + 'px' }\">\r\n\t\t\t<view class=\"header-view\">\r\n\t\t\t\t<view class=\"header-icon\" @click=\"returnBut\">\r\n\t\t\t\t\t<u-icon name=\"arrow-left\" color=\"#ffffff\" size=\"35\"></u-icon>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"header-title\">幸运抽奖</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<scroll-view :scroll-y=\"true\" style=\"height: 100vh;\">\r\n\t\t\t\r\n\t\t\t<!-- 中奖名单 -->\r\n\t\t\t<view class=\"name-list\" @click=\"goPrizeRecord\">中奖记录</view>\r\n\t\t\t\r\n\t\t\t<!-- 活动标题 -->\r\n\t\t\t<view class=\"activity-title\">\r\n\t\t\t\t<view class=\"activity-text\">{{ luckDraws.name }}</view>\r\n\t\t\t\t<view class=\"activity-time\">{{ luckDraws.beginTimeFormat[0] }} — {{ luckDraws.endTimeFormat[0] }}</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- 抽奖次数 -->\r\n\t\t\t<view class=\"lottery-draw\">\r\n\t\t\t\t<view class=\"lottery-draw-chance\">\r\n\t\t\t\t\t<text>您有 </text>\r\n\t\t\t\t\t<text class=\"lottery-draw-chance-num\">{{ numberOfLuckDraw }}</text>\r\n\t\t\t\t\t<text>次抽奖机会</text>\r\n\t\t\t\t\t<text v-if=\"luckDraws.drawType == 2\">{{ ' ' + luckDraws.usePoint }}积分一次</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- 转盘 -->\r\n\t\t\t<view class=\"turntable\">\r\n\t\t\t\t<image :src=\"imgUrl + '/turntable-bg.png'\" mode=\"\"></image>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"turntable-info\">\r\n\t\t\t\t\t<yp-turntable :gridInfo=\"gridInfo\" :winPrizes=\"winPrizes\" :luckDraws=\"luckDraws\" @requestResult=\"requestResult\" @getResult=\"getResult\"></yp-turntable>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- 活动说明 -->\r\n\t\t\t<view class=\"activity-explain\" v-if=\"luckDraws.ruleDescription.length >= 1\">\r\n\t\t\t\t<image :src=\"imgUrl + '/activity-explain02.png'\" mode=\"\"></image>\r\n\t\t\t\t<view class=\"activity-explain-text\">\r\n\t\t\t\t\t<image :src=\"imgUrl + '/activity-explain-title.png'\" mode=\"\"></image>\r\n\t\t\t\t\t<view class=\"activity-explain-title\">活动说明</view>\r\n\t\t\t\t\t<view class=\"activity-explain-info\">\r\n\t\t\t\t\t\t<view class=\"\">{{ luckDraws.ruleDescription }}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- 中奖名单 -->\r\n\t\t\t<view class=\"winning-list\">\r\n\t\t\t\t<image :src=\"imgUrl + '/winning-list02.png'\" mode=\"\"></image>\r\n\t\t\t\t<view class=\"winning-list-text\">\r\n\t\t\t\t\t<image :src=\"imgUrl + '/winning-list-title.png'\" mode=\"\"></image>\r\n\t\t\t\t\t<view class=\"winning-title\">中奖名单</view>\r\n\t\t\t\t\t<view class=\"winning-list-info\">\r\n\t\t\t\t\t\t<view class=\"winning-list-roll\" :style=\"{ 'top': rollTop + 'rpx' }\">\r\n\t\t\t\t\t\t\t<view class=\"winning-list-item\" v-for=\"(item, index) in showPrizeaNameList\">\r\n\t\t\t\t\t\t\t\t<view>{{ item.drawTimeFormat[0] }}</view>\r\n\t\t\t\t\t\t\t\t<view>{{ item.phoneFormat }}</view>\r\n\t\t\t\t\t\t\t\t<view>{{ item.name }}</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- 隔离层 -->\r\n\t\t\t<view style=\"height: 150rpx;\"></view>\r\n\t\t\t\r\n\t\t</scroll-view>\r\n\t\t\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport ypTurntable from '@/components/ui-components/yp-luck-draw/yp-turntable'\r\n\texport default {\r\n\t\tcomponents: { \r\n\t\t\typTurntable\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\timgUrl: this.config.imgUrl,\r\n\t\t\t\tisIphoneType: true, // 设备类型 true:ios，false:安卓\r\n\t\t\t\tstatusBarHeight: 0, // 自定义标题栏高度\r\n\t\t\t\tnumberOfLuckDraw: 0, // 抽奖次数\r\n\t\t\t\tpageIndex: 1, // 中奖名单请求页数\r\n\t\t\t\ttotal: 1, // 中奖名单条数\r\n\t\t\t\trollTop: 0, // 滚动 top\r\n\t\t\t\trollInterval: '', // 中奖名单定时器\r\n\t\t\t\tluckDraws: {}, // 抽奖活动数据\r\n\t\t\t\tgridInfo: [], // 奖品\r\n\t\t\t\tdrawGridInfo: [], // 抽中奖品\r\n\t\t\t\tprizeaNameList: [], // 获奖名单\r\n\t\t\t\tshowPrizeaNameList: [], // 显示的获奖名单\r\n\t\t\t\twinPrizes: 9999, // 获得奖品 0-7\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(option) {\r\n\t\t\t// 自动检测高度\r\n\t\t\tthis.getHeight()\r\n\t\t\t// 获取今天抽奖次数\r\n\t\t\tthis.getNumberOfLuckDraw()\r\n\t\t\t// 拉取抽奖数据\r\n\t\t\tthis.getLuckDrawInfo()\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\tclearInterval(this.rollInterval)\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 拉取抽奖数据\r\n\t\t\tgetLuckDrawInfo() {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t})\r\n\t\t\t\tthis.request({\r\n\t\t\t\t\turl: this.config.getOpenActivity,\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tif (res.statusCode != 200) return\r\n\t\t\t\t\tlet luckDraw = res.data.data\r\n\t\t\t\t\tlet gridInfo = []\r\n\t\t\t\t\tluckDraw.luckyDrawPrizeList.forEach(item => {\r\n\t\t\t\t\t\tgridInfo.push({\r\n\t\t\t\t\t\t\tlogo: item.url,\r\n\t\t\t\t\t\t\tname: item.name,\r\n\t\t\t\t\t\t\ttext: item.name.length <= 4 ? item.name : item.name.substring(0, 4) + '...',\r\n\t\t\t\t\t\t\tprop: 9,\r\n\t\t\t\t\t\t\tcolour: item.colour,\r\n\t\t\t\t\t\t\turl: item.url.length > 0 ? item.url : ''\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\tluckDraw.beginTimeFormat = luckDraw.beginTime.split(' ')\r\n\t\t\t\t\tluckDraw.endTimeFormat = luckDraw.endTime.split(' ')\r\n\t\t\t\t\tthis.luckDraws = luckDraw\r\n\t\t\t\t\tthis.gridInfo = gridInfo\r\n\t\t\t\t\tthis.init();\r\n\t\t\t\t\t// 获取中奖名单\r\n\t\t\t\t\tthis.getDrawRecord(false)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tinit(){\r\n\t\t\t\tlet tempStart = 0;\r\n\t\t\t\tlet tempScale = 0;\r\n\t\t\t\tthis.gridInfo.forEach((item, i)=>{\r\n\t\t\t\t\titem.scale = item.prop*5 - 90; // 所占弧度的度数\r\n\t\t\t\t\titem.scaleText = tempScale + (90 + (item.prop*5 - 90))/2; // 文字的回旋角度\r\n\t\t\t\t\titem.sin = Math.sin(Math.PI*2*item.scaleText/360)*160; // 正弦\r\n\t\t\t\t\titem.cos = Math.cos(Math.PI*2*item.scaleText/360)*160; // 余弦\r\n\t\t\t\t\ttempScale = tempScale + 90 + (item.prop*5 - 90);\r\n\t\t\t\t\tif(i !== 0){\r\n\t\t\t\t\t\ttempStart = tempStart + this.gridInfo[i - 1].prop*5;\r\n\t\t\t\t\t}\r\n\t\t\t\t\titem[\"start\"] = tempStart;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 自动检测高度\r\n\t\t\tgetHeight() {\r\n\t\t\t\tlet that = this\r\n\t\t\t\tuni.getSystemInfo({  \r\n\t\t\t\t    success: e => {  \r\n\t\t\t\t        let StatusBar = e.statusBarHeight;  \r\n\t\t\t\t        let rect = wx.getMenuButtonBoundingClientRect();  \r\n\t\t\t\t        if (e.system.toLowerCase().indexOf('ios') > -1) {  \r\n\t\t\t\t            //IOS  \r\n\t\t\t\t            let customBar = rect.bottom + (rect.top - e.statusBarHeight) * 2;  \r\n\t\t\t\t\t\t\tthat.statusBarHeight = customBar\r\n\t\t\t\t        } else {  \r\n\t\t\t\t            //安卓  \r\n\t\t\t\t            let headerBar = rect.height + (rect.top - e.statusBarHeight) * 2;  \r\n\t\t\t\t            let customBar = headerBar + e.statusBarHeight;\r\n\t\t\t\t\t\t\tthat.statusBarHeight = customBar\r\n\t\t\t\t        }  \r\n\t\t\t\t    }  \r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 获取今天抽奖次数\r\n\t\t\tgetNumberOfLuckDraw() {\r\n\t\t\t\tlet that = this\r\n\t\t\t\tthat.request({\r\n\t\t\t\t\turl: that.config.getNumberOfLuckDraw,\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tif (res.statusCode != 200) return\r\n\t\t\t\t\tlet data = res.data.data\r\n\t\t\t\t\tthat.numberOfLuckDraw = data\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 获取中奖名单\r\n\t\t\tgetDrawRecord(isReset) {\r\n\t\t\t\tlet that = this\r\n\t\t\t\tthat.request({\r\n\t\t\t\t\turl: that.config.getDrawRecord,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tpageIndex: that.pageIndex,\r\n\t\t\t\t\t\tpageSize: 10,\r\n\t\t\t\t\t\tnumber: that.luckDraws.number,\r\n\t\t\t\t\t\texclude: 1\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tif (res.statusCode != 200) return\r\n\t\t\t\t\tlet data = res.data.data\r\n\t\t\t\t\tdata.forEach(item => {\r\n\t\t\t\t\t\titem.drawTimeFormat = item.drawTime.split(' ')\r\n\t\t\t\t\t\titem.phoneFormat = item.phone.slice(0,3) + '****' + item.phone.slice(-4)\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif(isReset) {\r\n\t\t\t\t\t\tthat.showPrizeaNameList = that.prizeaNameList = []\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat.showPrizeaNameList = that.prizeaNameList = [...that.prizeaNameList, ...data]\r\n\t\t\t\t\tthat.total = res.data.total\r\n\t\t\t\t\t// 中奖名单滚动\r\n\t\t\t\t\tthat.rollNameList()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 中奖名单滚动\r\n\t\t\trollNameList() {\r\n\t\t\t\tif(this.prizeaNameList.length <= 5) return\r\n\t\t\t\tthis.rollInterval = setInterval(() => {\r\n\t\t\t\t\tthis.rollTop--\r\n\t\t\t\t\t// 请求下一页\r\n\t\t\t\t\tif(this.prizeaNameList.length * 60 <= Math.abs(this.rollTop - 400) && this.prizeaNameList.length < this.total) {\r\n\t\t\t\t\t\tthis.pageIndex++\r\n\t\t\t\t\t\tclearInterval(this.rollInterval)\r\n\t\t\t\t\t\tthis.getDrawRecord(false)\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 显示完成所有数据，重复渲染\r\n\t\t\t\t\tif(this.showPrizeaNameList.length * 60 < Math.abs(this.rollTop - 400) && this.prizeaNameList.length >= this.total) {\r\n\t\t\t\t\t\tthis.showPrizeaNameList = [...this.showPrizeaNameList, ...this.prizeaNameList]\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 20)\r\n\t\t\t},\r\n\t\t\t// 获取结果\r\n\t\t\trequestResult() {\r\n\t\t\t\tlet that = this\r\n\t\t\t\tlet companyCode = that.config.companyCode\r\n\t\t\t\tthat.request({\r\n\t\t\t\t\turl: that.config.getLuckyDraw + that.luckDraws.id + '/luckyDraw',\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tchannelsCode: companyCode.channelCode,\r\n\t\t\t\t\t\tterminalsCode: companyCode.terminalCode,\r\n\t\t\t\t\t\torganizationCode: companyCode.organizationCode,\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tif (res.statusCode == 200) {\r\n\t\t\t\t\t\tthat.numberOfLuckDraw--\r\n\t\t\t\t\t\tlet data = res.data.data\r\n\t\t\t\t\t\tthat.drawGridInfo = data\r\n\t\t\t\t\t\tthat.winPrizes = data.location - 1\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.data.message,\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 抽奖完成\r\n\t\t\tgetResult(event) {\r\n\t\t\t\tthis.winPrizes = 9999\r\n\t\t\t\tconsole.log('接口返回:', this.drawGridInfo.name);\r\n\t\t\t\tconsole.log('抽到:', event.text);\r\n\t\t\t\t// 获取中奖名单\r\n\t\t\t\tthis.pageIndex = 1\r\n\t\t\t\tthis.getDrawRecord(true)\r\n\t\t\t\t// uni.showModal({\r\n\t\t\t\t// \t// content: '恭喜抽到：' + event.text,\r\n\t\t\t\t//     content: '恭喜抽到：' + this.drawGridInfo.name,\r\n\t\t\t\t// \tshowCancel: false,\r\n\t\t\t\t// \tconfirmText: '知道了',\r\n\t\t\t\t//     success: function (res) {}\r\n\t\t\t\t// });\r\n\t\t\t},\r\n\t\t\t// 去中奖记录\r\n\t\t\tgoPrizeRecord() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: './record'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 返回按钮\r\n\t\t\treturnBut() {\r\n\t\t\t\tuni.navigateBack()\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.content {\r\n\t\tposition: fixed;\r\n\t\twidth: 100vw;\r\n\t\theight: 100vh;\r\n\t\tbackground-size: cover;\r\n\t\tbackground-repeat:no-repeat;\r\n\t\tbackground-position-x: center;\r\n\t\t/* background-position-y: center; */\r\n\t}\r\n\t\r\n\t.name-list {\r\n\t\tposition: fixed;\r\n\t\ttop: 200rpx;\r\n\t\tright: 0;\r\n\t\twidth: 140rpx;\r\n\t\theight: 54rpx;\r\n\t\tbackground: rgba(255, 255, 255, 0.2);\r\n\t\tborder-radius: 27rpx 0rpx 0rpx 27rpx;\r\n\t\tz-index: 10;\r\n\t\ttext-align: center;\r\n\t\tfont-size: 24rpx;\r\n\t\tfont-weight: 500;\r\n\t\tcolor: #FFFFFF;\r\n\t\tline-height: 54rpx;\r\n\t}\r\n\t\r\n\t/* 自定义头部 start */\r\n\t.header {\r\n\t\tposition: fixed;\r\n\t\tz-index: 20;\r\n\t}\r\n\t\r\n\t.header-view {\r\n\t\tdisplay: flex;\r\n\t\tposition: absolute;\r\n\t\tbottom: 10rpx;\r\n\t}\r\n\t\r\n\t.header-icon {\r\n\t\tpadding: 8rpx 0 0 20rpx;\r\n\t}\r\n\t\r\n\t.header-title {\r\n\t\twidth: 630rpx;\r\n\t\tmargin-right: 60rpx;\r\n\t\tfont-size: 34rpx;\r\n\t\tfont-weight: 500;\r\n\t\tline-height: 50rpx;\r\n\t\ttext-align: center;\r\n\t\tcolor: #FFFFFF;\r\n\t}\r\n\t\r\n\t/* 自定义头部 end */\r\n\t\r\n\t/* 活动标题 start */\r\n\t.activity-title {\r\n\t\twidth: 710rpx;\r\n\t\theight: 210rpx;\r\n\t\tmargin: 150rpx 20rpx 0;\r\n\t}\r\n\t\r\n\t.activity-text {\r\n\t\ttext-align: center;\r\n\t\tfont-size: 75rpx;\r\n\t\tcolor: #FFFFFF;\r\n\t\tline-height: 100rpx;\r\n\t\ttext-shadow: 0rpx 2px 0rpx #FF2562;\r\n\t}\r\n\t\r\n\t.activity-time {\r\n\t\ttext-align: center;\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #FFFFFF;\r\n\t\tline-height: 50rpx;\r\n\t\tletter-spacing: 1px;\r\n\t}\r\n\t\r\n\t/* 活动标题 end */\r\n\t\r\n\t/* 转盘 start */\r\n\t.turntable {\r\n\t\tposition: relative;\r\n\t\twidth: 660rpx;\r\n\t\theight: 660rpx;\r\n\t\tmargin: 0 auto;\r\n\t}\r\n\t\r\n\t.turntable>image {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tright: 0;\r\n\t\twidth: 660rpx;\r\n\t\theight: 660rpx;\r\n\t}\r\n\t\r\n\t.turntable-info {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tright: 0;\r\n\t\twidth: 660rpx;\r\n\t\theight: 660rpx;\r\n\t}\r\n\t\r\n\t.lottery-draw {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t}\r\n\t\r\n\t.lottery-draw-chance {\r\n\t\theight: 70rpx;\r\n\t\tmargin: 0 auto 20rpx;\r\n\t\tpadding: 0 30rpx;\r\n\t\tbackground: linear-gradient(90deg, #BA4FFD 0%, #FE82D7 100%);\r\n\t\tborder-radius: 35rpx;\r\n\t\ttext-align: center;\r\n\t\tfont-size: 24rpx;\r\n\t\tfont-weight: 500;\r\n\t\tcolor: #FFFFFF;\r\n\t\tline-height: 70rpx;\r\n\t}\r\n\t\r\n\t.lottery-draw-chance-num {\r\n\t\tmargin: 0 10rpx;\r\n\t\tfont-size: 32rpx;\r\n\t}\r\n\t\r\n\t/* 转盘 end */\r\n\t\r\n\t/* 活动说明 start */\r\n\t.activity-explain {\r\n\t\tposition: relative;\r\n\t\twidth: 694rpx;\r\n\t\theight: 424rpx;\r\n\t\tmargin: 70rpx auto 0;\r\n\t}\r\n\t\r\n\t.activity-explain>image {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\t\r\n\t.activity-explain-text {\r\n\t\tposition: absolute;\r\n\t\ttop: 0rpx;\r\n\t\twidth: 614rpx;\r\n\t\tmargin: 0rpx 40rpx;\r\n\t}\r\n\t\r\n\t.activity-explain-info {\r\n\t\tmargin-top: 30rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: 500;\r\n\t\tcolor: #FFFFFF;\r\n\t\tline-height: 40rpx;\r\n\t}\r\n\t\r\n\t.activity-explain-text>image {\r\n\t\tdisplay: block;\r\n\t\twidth: 268rpx;\r\n\t\theight: 68rpx;\r\n\t\tmargin: 0 auto;\r\n\t}\r\n\t\r\n\t/* 活动说明 end */\r\n\t\r\n\t/* 中奖名单 start */\r\n\t.winning-list {\r\n\t\tposition: relative;\r\n\t\twidth: 690rpx;\r\n\t\theight: 400rpx;\r\n\t\tmargin: 70rpx auto 0;\r\n\t}\r\n\t\r\n\t.winning-list>image {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\t\r\n\t.winning-list-text {\r\n\t\tposition: absolute;\r\n\t\ttop: 0rpx;\r\n\t\twidth: 680rpx;\r\n\t}\r\n\t\r\n\t.winning-list-text>image {\r\n\t\tdisplay: block;\r\n\t\twidth: 268rpx;\r\n\t\theight: 68rpx;\r\n\t\tmargin: 0 auto;\r\n\t}\r\n\t\r\n\t.winning-title, .activity-explain-title {\r\n\t\tposition: absolute;\r\n\t\ttop: 0rpx;\r\n\t\twidth: 100%;\r\n\t\theight: 68rpx;\r\n\t\ttext-align: center;\r\n\t\tfont-size: 32rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #FFFFFF;\r\n\t\tline-height: 68rpx;\r\n\t}\r\n\t\r\n\t.winning-list-info {\r\n\t\tposition: relative;\r\n\t\theight: 300rpx;\r\n\t\tmargin: 15rpx 40rpx 0;\r\n\t\toverflow: hidden;\r\n\t}\r\n\t\r\n\t.winning-list-roll {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\t\r\n\t.winning-list-item {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\t\r\n\t.winning-list-item>view {\r\n\t\twidth: 150rpx;\r\n\t\tfont-size: 26rpx;\r\n\t\tfont-weight: 500;\r\n\t\tcolor: #FFFFFF;\r\n\t\tline-height: 60rpx;\r\n\t}\r\n\t\r\n\t.winning-list-item>view:nth-child(1) {\r\n\t\twidth: 150rpx;\r\n\t}\r\n\t\r\n\t.winning-list-item>view:nth-child(2) {\r\n\t\ttext-align: center;\r\n\t}\r\n\t\r\n\t.winning-list-item>view:nth-child(3) {\r\n\t\twidth: 150rpx;\r\n\t\ttext-align: right;\r\n\t\toverflow: hidden;\r\n\t\ttext-overflow: ellipsis;\r\n\t\twhite-space: nowrap;\r\n\t}\r\n\t\r\n\t/* 中奖名单 end */\r\n\t\r\n</style>","import mod from \"-!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./turntable.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./turntable.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1680766828790\n      var cssReload = require(\"F:/App/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}