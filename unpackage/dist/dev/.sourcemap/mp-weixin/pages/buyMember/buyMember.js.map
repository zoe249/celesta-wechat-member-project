{"version":3,"sources":["uni-app:///main.js","webpack:///G:/代码-项目/悦朋/uniapp/O2O/悦朋微会员/celesta-wechat-member-project/pages/buyMember/buyMember.vue?acb3","webpack:///G:/代码-项目/悦朋/uniapp/O2O/悦朋微会员/celesta-wechat-member-project/pages/buyMember/buyMember.vue?735e","webpack:///G:/代码-项目/悦朋/uniapp/O2O/悦朋微会员/celesta-wechat-member-project/pages/buyMember/buyMember.vue?b962","webpack:///G:/代码-项目/悦朋/uniapp/O2O/悦朋微会员/celesta-wechat-member-project/pages/buyMember/buyMember.vue?9d83","uni-app:///pages/buyMember/buyMember.vue","webpack:///G:/代码-项目/悦朋/uniapp/O2O/悦朋微会员/celesta-wechat-member-project/pages/buyMember/buyMember.vue?85c1","webpack:///G:/代码-项目/悦朋/uniapp/O2O/悦朋微会员/celesta-wechat-member-project/pages/buyMember/buyMember.vue?dac1"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","memberList","total","currentMember","isAgreement","goodsInfo","paymenst","imgUrl","pageInfo","pageIndex","pageSize","filters","formtMonth","unit","newValue","onShow","onLoad","methods","getPaidMemberList","uni","title","url","selectMember","checkboxChange","icon","duration","toPayHandle","companyCode","code","attach","method","type","activityId","body","detail","price","quantity","header","getWxCode","success","resolve","fail","reject","startWeiXinPay","timeStamp","nonceStr","package","signType","paySign","setTimeout","that","cancelOrder","toProtocol","scrolltolower"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,kBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkI;AAClI;AAC6D;AACL;AACsC;;;AAG9F;AAC0K;AAC1K,gBAAgB,mLAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,gGAAM;AACR,EAAE,yGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AChCA;AAAA;AAAA;AAAA;AAA4nB,CAAgB,ipBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCqGhpB;EACAC;IACA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;QAAA;QACAC;QACAC;MACA;IACA;EACA;EACAC;IACAC;MACA;MACA;MACA;MACA;QACAC;QACAC;MACA;QACAD;QACAC;MACA;MACA;MACA;MACA;MACA;MAAA,KACA;QACAD;QACAC;MACA;MACAA;MACA;IACA;EACA;EACAC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EAAA,CACA;EACAC;IACA;EACA;EACAC;IACAC;MAAA;MACAC;QACAC;MACA;MACA;QACAC;QAAA;QACArB;UACAS;UACAC;QACA;MACA;QAAA;QACA;QACA;;QAEA;QACA;UACA;QACA;UACAS;QACA;MACA;IACA;IACA;IACAG;MAAA;MACA;MACA;MACA;MAEA;QACAD;MACA;QACA;QACAF;MACA;IAEA;IACA;IACAI;MACA;QACA;QACAJ;UACAC;UACAI;UACAC;QACA;MACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IACA;kBAAA;kBAAA;gBAAA;gBAAA,iCACAP;kBACAC;kBACAI;gBACA;cAAA;gBAEAL;kBACAC;gBACA;gBACAO;gBAAA;gBAAA,OAEA;cAAA;gBAAAC;gBACAC;gBACA;kBACAR;kBACAS;kBACA9B;oBACA+B;oBAAA;oBACAC;oBAAA;oBACA;oBACAJ;oBAAA;oBACAK;oBAAA;oBACAC;oBAAA;oBACAL;oBAAA;oBACAM;oBAAA;oBACAC;kBACA;;kBACAC;oBACA;kBACA;gBACA;kBACA;oBACA;oBACA;kBACA;oBACAlB;oBACAA;sBACAC;sBACAI;oBACA;kBACA;gBACA;kBACAL;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;AACA;AACA;IACAmB;MACA;QACAnB;UACAoB;YACAC;UACA;UACAC;YACAC;UACA;QACA;MACA;IACA;IACA;AACA;AACA;IACAC;MACA;MACA;MACAxB;QACAyB;QACAC;QACAC;QACAC;QACAC;QAEAT;UACApB;UACAA;YACAC;YACAI;UACA;UACAyB;YACA9B;UACA;QACA;QACAsB;UACAtB;UACA+B;QACA;MACA;IACA;IACA;IACAC;MACA;MACAD;QACA7B;QACAS;MACA;QACA;QACAX;UACAC;UACAI;QACA;MACA;IACA;IACA;IACA4B;MACAjC;QACAE;MACA;IACA;IACA;IACAgC;MACA;QAAA5C;QAAAC;MACA;MACA;QACA;MACA;MACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACxUA;AAAA;AAAA;AAAA;AAAmtC,CAAgB,grCAAG,EAAC,C;;;;;;;;;;;ACAvuC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/buyMember/buyMember.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/buyMember/buyMember.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./buyMember.vue?vue&type=template&id=b73b5270&scoped=true&\"\nvar renderjs\nimport script from \"./buyMember.vue?vue&type=script&lang=js&\"\nexport * from \"./buyMember.vue?vue&type=script&lang=js&\"\nimport style0 from \"./buyMember.vue?vue&type=style&index=0&id=b73b5270&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b73b5270\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/buyMember/buyMember.vue\"\nexport default component.exports","export * from \"-!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./buyMember.vue?vue&type=template&id=b73b5270&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.memberList.length && _vm.memberList.length > 0\n  var l0 = g0\n    ? _vm.__map(_vm.memberList, function (item, index) {\n        var $orig = _vm.__get_orig(item)\n        var f0 = _vm._f(\"formtMonth\")(item.validPeriod)\n        var f1 = _vm._f(\"formtMonth\")(item.validPeriod)\n        return {\n          $orig: $orig,\n          f0: f0,\n          f1: f1,\n        }\n      })\n    : null\n  var f2 = g0 ? _vm._f(\"formtMonth\")(_vm.goodsInfo.validPeriod) : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        l0: l0,\n        f2: f2,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./buyMember.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./buyMember.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<view class=\"page-wrap\" v-if=\"memberList.length && memberList.length > 0\">\r\n\t\t\t<!-- 头部 -->\r\n\t\t\t<!-- <u-navbar title=\"我的礼品卡\" :is-back=\"false\" :background=\"background\" title-color=\"#ffffff\" title-size=\"35\"></u-navbar> -->\r\n\t\t\t<view class=\"member-wrap\">\r\n\t\t\t\t<view class=\"title\">请选择付费会员</view>\r\n\t\t\t\t<scroll-view scroll-x=\"true\" @scrolltolower=\"scrolltolower\">\r\n\t\t\t\t\t<view class=\"member-list\">\r\n\t\t\t\t\t\t<view \r\n\t\t\t\t\t\tclass=\"member-item\" \r\n\t\t\t\t\t\tv-for=\"(item,index) in memberList\" \r\n\t\t\t\t\t\t:key=\"item.id\" \r\n\t\t\t\t\t\t:class=\"{'current-member' : index === currentMember}\" \r\n\t\t\t\t\t\t@click=\"selectMember(item,index)\"\r\n\t\t\t\t\t\t:data-index=\"index\"\r\n\t\t\t\t\t\t:data-id=\"item.id\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<view class=\"member-item-img\">\r\n\t\t\t\t\t\t\t\t<image :src=\"item.icon\" />\r\n\t\t\t\t\t\t\t\t<text>{{ item.productName }}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"member-item-price\">\r\n\t\t\t\t\t\t\t\t<view class=\"new-price\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"small\">￥</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"blod\">{{ item.salePrice }}</text>\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t<!-- <text class=\"small\">/月</text> -->\r\n\t\t\t\t\t\t\t\t\t<text class=\"small\" >\r\n\t\t\t\t\t\t\t\t\t\t<text>/</text>\r\n\t\t\t\t\t\t\t\t\t\t<text>{{ item.validPeriod | formtMonth }}</text>\r\n\t\t\t\t\t\t\t\t\t\t<!-- <text></text> -->\r\n\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"old-price\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"small\">￥</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"blod\">{{ item.marketPrice }}</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"small\">\r\n\t\t\t\t\t\t\t\t\t\t<text>/</text>\r\n\t\t\t\t\t\t\t\t\t\t<text>{{ item.validPeriod | formtMonth }}</text>\r\n\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- 权益说明 -->\r\n\t\t\t<view class=\"explain-wrap\">\r\n\t\t\t\t<view class=\"title\">权益说明</view>\r\n\t\t\t\t<!-- <view class=\"content\">\r\n\t\t\t\t\t<view>1、充值金额可购买门店线上线下商品</view>\r\n\t\t\t\t\t<view>2、充值金额不计利息，不可提现，退款和转赠</view>\r\n\t\t\t\t\t<view>3、单笔冲值上限1000元，充值成功后，您的充值金额将会实时充值您的包账户</view>\r\n\t\t\t\t\t<view>4、使用钱包余额购买的订单，退换货订单产生的退款将返回钱包余额</view>\r\n\t\t\t\t\t<view>5、余额有效期：永久有效</view>\r\n\t\t\t\t</view> -->\r\n\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t<view>{{ goodsInfo.rightsDescription || \"\" }}</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\r\n\t\t\t<!-- 立即支付 -->\r\n\t\t\t<view class=\"pay-btn\">\r\n\t\t\t\t<view class=\"checked\">\r\n\t\t\t\t\t<checkbox-group @change=\"checkboxChange\">\r\n\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t<checkbox value=\"cb\" style=\"transform:scale(0.6)\"/>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t</checkbox-group>\r\n\t\t\t\t\t<view>\r\n\t\t\t\t\t\t<text>同意</text>\r\n\t\t\t\t\t\t<text style=\"color: #468DED;\" @click=\"toProtocol\">\r\n\t\t\t\t\t\t\t<text>《</text>\r\n\t\t\t\t\t\t\t<text style=\"text-decoration: underline;\">付费会员协议</text>\r\n\t\t\t\t\t\t\t<text>》</text>\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"toPay\" @click=\"toPayHandle\">\r\n\t\t\t\t\t<text class=\"small\">立即支付 ￥</text>\r\n\t\t\t\t\t<text class=\"blod\">{{ goodsInfo.salePrice || 99 }}</text>\r\n\t\t\t\t\t<text class=\"small\">\r\n\t\t\t\t\t\t<text>/</text>\r\n\t\t\t\t\t\t<text>{{ goodsInfo.validPeriod | formtMonth }}</text>\r\n\t\t\t\t\t</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 空页面 -->\r\n\t\t<view class=\"not-activity\" v-else>\r\n\t\t\t<image :src=\"imgUrl + '/notLuckDraw-icon.png'\" mode=\"\"></image>\r\n\t\t\t<view>暂时没有推出付费会员计划</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tmemberList:[],\t// 付费会员方案列表\r\n\t\t\t\ttotal:0,\t// 付费会员方案总数\r\n\t\t\t\tcurrentMember:0,\r\n\t\t\t\tisAgreement:false, // 是否勾选协议\r\n\t\t\t\tgoodsInfo: {}, // 商品信息\r\n\t\t\t\tpaymenst: {}, // 支付参数\r\n\t\t\t\timgUrl: this.config.imgUrl,\r\n\t\t\t\tpageInfo:{\t// 分页查询付费会员\r\n\t\t\t\t\tpageIndex:1,\r\n\t\t\t\t\tpageSize:10\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tfilters:{\r\n\t\t\tformtMonth(value){\r\n\t\t\t\tlet _val = value\r\n\t\t\t\tlet unit = ''\r\n\t\t\t\tlet newValue = ''\r\n\t\t\t\tif(_val >= 12 && _val % 12 === 0){\r\n\t\t\t\t\tunit = '年'\r\n\t\t\t\t\tnewValue = _val / 12\r\n\t\t\t\t}else if(_val >= 3 && _val < 12 && _val % 3 === 0){\r\n\t\t\t\t\tunit = '季'\r\n\t\t\t\t\tnewValue = _val / 3\r\n\t\t\t\t}\r\n\t\t\t\t// else if(_val > 1 && _val % 3 !== 0 && _val % 12 !== 0){\r\n\t\t\t\t// \tnewValue = _val \r\n\t\t\t\t// \treturn '月*' +  newValue\r\n\t\t\t\t// }\r\n\t\t\t\telse{\r\n\t\t\t\t\tunit = '月'\r\n\t\t\t\t\tnewValue = _val \r\n\t\t\t\t}\r\n\t\t\t\tnewValue = newValue == 1 ? '' : newValue \r\n\t\t\t\treturn newValue + unit\r\n\t\t\t}\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\t// uni.getSystemInfo({\r\n\t\t\t// \tsuccess:res=>{\r\n\t\t\t// \t\tconsole.log(res)\r\n\t\t\t// \t\tif(res.model.indexOf('iPhone') !== -1){\r\n\t\t\t// \t\t\tconsole.log('iPhone')\r\n\t\t\t// \t\t}\r\n\t\t\t// \t}\r\n\t\t\t// })\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis.getPaidMemberList()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgetPaidMemberList(){\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle:'加载中'\r\n\t\t\t\t})\r\n\t\t\t\tthis.request({\r\n\t\t\t\t\turl:this.config.paidMemberSchemes + '?status=' + '02',\t// 状态，小程序展示商品时传，（01-未生效/02-已生效/03-已作废）\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\tpageIndex:this.pageInfo.pageIndex,\r\n\t\t\t\t\t\tpageSize:this.pageInfo.pageSize\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(res=>{\r\n\t\t\t\t\tthis.memberList.push(...res.data.data)\r\n\t\t\t\t\tthis.total = res.data.total\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 默认选中第一条\r\n\t\t\t\t\tif(this.memberList.length > 0){\r\n\t\t\t\t\t\tthis.selectMember(this.memberList[0], 0)\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 选择付费方案\r\n\t\t\tselectMember(item, index){\r\n\t\t\t\t// const { index,id } = e.currentTarget.dataset\r\n\t\t\t\t// this.currentMember = index\r\n\t\t\t\tthis.currentMember = index\r\n\t\t\t\t\r\n\t\t\t\tthis.request({\r\n\t\t\t\t\turl:this.config.getPaidMemberById + '/' + item.id,\r\n\t\t\t\t}).then(res=>{\r\n\t\t\t\t\tthis.goodsInfo = res.data.data\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t// 协议复选框\r\n\t\t\tcheckboxChange(e){\r\n\t\t\t\tif(e.detail.value.length > 0){\r\n\t\t\t\t\tthis.isAgreement = true\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '勾选代表您同意《付费会员协议》',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 1500\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.isAgreement = false\r\n\t\t\t\t}\r\n\t\t\t},\t\r\n\t\t\t// 立即支付的回调\r\n\t\t\tasync toPayHandle(){\r\n\t\t\t\tif(!this.isAgreement){\r\n\t\t\t\t\treturn uni.showToast({\r\n\t\t\t\t\t\ttitle:'请先勾选《付费会员协议》',\r\n\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle:'订单生成中',\r\n\t\t\t\t\t})\r\n\t\t\t\t\tlet companyCode = this.config.companyCode\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst code = await this.getWxCode()\r\n\t\t\t\t\tconst attach = uni.getStorageSync('memberInfo').id + ',' + companyCode.organizationCode + ',' + companyCode.channelCode + ',' + companyCode.terminalCode \r\n\t\t\t\t\tthis.request({\r\n\t\t\t\t\t\turl:this.config.getWechatPay,\r\n\t\t\t\t\t\tmethod:'POST',\r\n\t\t\t\t\t\tdata:{\r\n\t\t\t\t\t\t\ttype:'04',\t// 类型：01为券；02礼品卡；03储值。V3.0.3；04付费会员。v3.0.6\r\n\t\t\t\t\t\t\tactivityId:this.goodsInfo.id,\t// 活动ID\r\n\t\t\t\t\t\t\t// giftCardSchemeOrderId:'',\t// 礼品卡订单号\r\n\t\t\t\t\t\t\tcode,\t// 微信code\r\n\t\t\t\t\t\t\tbody:'miaoshu',\t// 商品描述\r\n\t\t\t\t\t\t\tdetail:'付费会员活动',\t// 商品详细描述\r\n\t\t\t\t\t\t\tattach,\t\t// 会员Id,组织code,渠道code,终端code\r\n\t\t\t\t\t\t\tprice:this.goodsInfo.salePrice,\t\t// 单价\r\n\t\t\t\t\t\t\tquantity: 1\t// 数量，付费会员固定设置为1\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\theader:{\r\n\t\t\t\t\t\t\t'Content-type':'application/x-www-form-urlencoded'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).then(res=>{\r\n\t\t\t\t\t\tif(res.statusCode == 200) {\r\n\t\t\t\t\t\t\tthis.payments = res.data\r\n\t\t\t\t\t\t\t\tthis.startWeiXinPay()\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.hideLoading() // 取消加载中\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: res.data.detail,\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * 获取微信code\r\n\t\t\t */\r\n\t\t\tgetWxCode(){\r\n\t\t\t\treturn new Promise((resolve,reject)=>{\r\n\t\t\t\t\tuni.login({\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\tresolve(res.code)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t\treject(err)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 调用微信支付\r\n\t\t\t */\r\n\t\t\tstartWeiXinPay(){\r\n\t\t\t\tconst payment = this.payments\r\n\t\t\t\tlet that = this\r\n\t\t\t\tuni.requestPayment({\r\n\t\t\t\t\ttimeStamp: payment.timeStamp,\r\n\t\t\t\t\tnonceStr: payment.nonceStr,\r\n\t\t\t\t\tpackage: payment.package,\r\n\t\t\t\t\tsignType: payment.signType,\r\n\t\t\t\t\tpaySign: payment.paySign,\r\n\t\t\t\t\t\r\n\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\tuni.hideLoading() // 取消加载中\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '支付成功',\r\n\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\tuni.navigateBack()\r\n\t\t\t\t\t\t},1500)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail() {\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\tthat.cancelOrder()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 支付失败调用取消订单\r\n\t\t\tcancelOrder() {\r\n\t\t\t\tlet that = this\r\n\t\t\t\tthat.request({\r\n\t\t\t\t\turl: that.config.cancelOrder + that.goodsInfo.id,\r\n\t\t\t\t\tmethod: 'DELETE'\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\t// 取消订单\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '支付失败',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 跳转到协议页面\r\n\t\t\ttoProtocol(){\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl:'/pages/protocol/protocol'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// scroll触底事件\r\n\t\t\tscrolltolower(event){\r\n\t\t\t\tconst {pageIndex,pageSize} = this.pageInfo\r\n\t\t\t\t// console.log(event)\r\n\t\t\t\tif(pageIndex * pageSize >= this.total){\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.pageInfo.pageIndex++;\r\n\t\t\t\tthis.getPaidMemberList()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n.member-wrap{\r\n\tpadding: 20rpx;\r\n\tbackground: #FFFFFF;\r\n\t.title{\r\n\t\tfont-size: 32rpx;\r\n\t\t// font-family: PingFang SC;\r\n\t\tfont-weight: 800;\r\n\t\tcolor: #E6B991;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\t.member-list{\r\n\t\tdisplay: flex;\r\n\t\t.member-item{\r\n\t\t\twidth: 230rpx;\r\n\t\t\tmargin: 0 10rpx;\r\n\t\t\t.member-item-img{\r\n\t\t\t\tmargin: 20rpx 20rpx;\r\n\t\t\t\timage{\r\n\t\t\t\t\twidth: 168rpx;\r\n\t\t\t\t\theight: 168rpx;\r\n\t\t\t\t\tborder-radius: 10rpx;\r\n\t\t\t\t}\r\n\t\t\t\ttext{\r\n\t\t\t\t\tmargin-top: 20rpx;\r\n\t\t\t\t\tdisplay: inline-block;\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\ttext-align: center;\r\n\t\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\t\tfont-family: PingFang SC;\r\n\t\t\t\t\tfont-weight: 800;\r\n\t\t\t\t\tcolor: #333333;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t.member-item-price{\r\n\t\t\t\tmargin-top: 50rpx;\r\n\t\t\t\tmargin-bottom: 20rpx;\r\n\t\t\t\t.new-price{\r\n\t\t\t\t\tcolor: #DDB28C;\r\n\t\t\t\t\ttext-align: center;\r\n\t\t\t\t}\r\n\t\t\t\t.old-price{\r\n\t\t\t\t\tcolor: #999999;\r\n\t\t\t\t\ttext-decoration: line-through;\r\n\t\t\t\t\ttext-align: center;\r\n\t\t\t\t}\r\n\t\t\t\t.small{\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t}\r\n\t\t\t\t.blod{\r\n\t\t\t\t\tfont-size: 36rpx;\r\n\t\t\t\t\tfont-weight: 600;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t.current-member{\r\n\t\t\tborder-radius: 10rpx;\r\n\t\t\tbackground-color: #FFF2E1;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.explain-wrap{\r\n\tmargin: 20rpx;\r\n\tpadding: 20rpx;\r\n\tbackground-color: #FFFFFF;\r\n\tborder-radius: 10rpx;\r\n\t.content{\r\n\t\tmargin-top: 20rpx;\r\n\t\tfont-size: 22rpx;\r\n\t\tcolor:#333333;\r\n\t\tline-height: 44rpx;\r\n\t}\r\n}\r\n\r\n.pay-btn{\r\n\t// margin-top: 50rpx;\r\n\tposition: absolute;\r\n\twidth: 100vw;\r\n\tbottom: 50rpx;\r\n\t.checked{\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tview{\r\n\t\t\tfont-size: 22rpx;\r\n\t\t\tfont-weight: 500;\r\n\t\t\tcolor: #999999;\r\n\t\t}\r\n\t}\r\n\t.toPay{\r\n\t\tmargin: 20rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tcolor: #FFFFFF;\r\n\t\theight: 80rpx;\r\n\t\tbackground-color: #ED6D46;\r\n\t\tborder-radius: 40rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\t.blod{\r\n\t\t\tfont-size: 36rpx;\r\n\t\t\tfont-weight: 600;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.not-activity {\r\n\t\twidth: 350rpx;\r\n\t\tmargin: 40% auto 0;\r\n\t}\r\n\t\r\n\t.not-activity>image {\r\n\t\tdisplay: block;\r\n\t\twidth: 176rpx;\r\n\t\theight: 180rpx;\r\n\t\tmargin: 0 auto 0;\r\n\t}\r\n\t\r\n\t.not-activity>view {\r\n\t\ttext-align: center;\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: 500;\r\n\t\tcolor: #333333;\r\n\t\tline-height: 40rpx;\r\n\t}\r\n</style>\r\n","import mod from \"-!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./buyMember.vue?vue&type=style&index=0&id=b73b5270&lang=scss&scoped=true&\"; export default mod; export * from \"-!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./buyMember.vue?vue&type=style&index=0&id=b73b5270&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1680766833462\n      var cssReload = require(\"F:/App/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}